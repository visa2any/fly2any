# API Setup Guide for Fly2Any

This guide will help you configure the required API credentials to unlock full functionality of Fly2Any.

## üéØ Quick Status Check

The app shows a **yellow banner** at the top when services are not configured:
- ‚ùå **Amadeus API (Demo Data)** - Flight/hotel/car searches use mock data
- ‚ùå **Database (Limited Features)** - No saved searches, price alerts, or user preferences
- ‚ùå **Authentication (Sign-in Disabled)** - Cannot create accounts or sign in

## üöÄ Quick Start (Recommended)

### Option 1: Get Amadeus API Credentials (Free Test Account)

Amadeus provides a **free test environment** with no credit card required:

1. **Create Free Account**
   - Visit: https://developers.amadeus.com/register
   - Sign up with email (no credit card needed)
   - Verify your email

2. **Create an App**
   - Go to "My Apps" ‚Üí "Create New App"
   - Name: `fly2any-dev`
   - Description: `Testing flight/hotel/car search`
   - Click "Create"

3. **Get Your Credentials**
   ```
   API Key: [Copy this]
   API Secret: [Copy this]
   Environment: test
   ```

4. **Update .env.local**
   ```bash
   # Replace these lines in .env.local:
   AMADEUS_API_KEY=your_api_key_here
   AMADEUS_API_SECRET=your_api_secret_here
   AMADEUS_ENVIRONMENT=test
   ```

5. **Restart the Server**
   ```bash
   # Press Ctrl+C to stop
   npm run dev
   ```

‚úÖ **Done!** The yellow banner will disappear and you'll see live flight/hotel/car data.

### Option 2: Set Up Database (Optional - For Full Features)

For saved searches, price alerts, and user accounts:

1. **Get Free PostgreSQL Database**
   - **Neon** (Recommended): https://neon.tech (Free 3GB)
   - **Supabase**: https://supabase.com (Free 500MB)
   - **Railway**: https://railway.app ($5 credit)

2. **Copy Connection String**
   ```
   Example: postgresql://user:password@host:5432/database
   ```

3. **Update .env.local**
   ```bash
   DATABASE_URL=postgresql://your_connection_string_here
   POSTGRES_URL=postgresql://your_connection_string_here
   ```

4. **Run Migrations**
   ```bash
   npx prisma migrate dev
   ```

5. **Restart the Server**
   ```bash
   npm run dev
   ```

## üìù All Environment Variables

### Core Configuration

```env
# NextAuth (Already configured - don't change)
NEXTAUTH_SECRET=<auto-generated>
NEXTAUTH_URL=http://localhost:3000

# Amadeus API (Required for real data)
AMADEUS_API_KEY=your_amadeus_api_key_here
AMADEUS_API_SECRET=your_amadeus_api_secret_here
AMADEUS_ENVIRONMENT=test  # or 'production' with paid account

# Database (Optional - enables account features)
DATABASE_URL=postgresql://user:password@host:5432/database
POSTGRES_URL=postgresql://user:password@host:5432/database

# OAuth (Optional - for Google/GitHub sign-in)
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret
```

### Advanced (Optional)

```env
# Duffel API (Alternative to Amadeus)
DUFFEL_ACCESS_TOKEN=duffel_test_xxx

# Stripe (For payments)
STRIPE_PUBLIC_KEY=pk_test_xxx
STRIPE_SECRET_KEY=sk_test_xxx
STRIPE_WEBHOOK_SECRET=whsec_xxx

# Sentry (Error tracking)
SENTRY_DSN=https://xxx@sentry.io/xxx
SENTRY_ORG=your_org
SENTRY_PROJECT=your_project
SENTRY_AUTH_TOKEN=your_token
```

## üîç Troubleshooting

### Issue: "401 Unauthorized" in Console

**Cause**: Invalid API credentials

**Solution**:
1. Verify credentials in Amadeus dashboard
2. Ensure no extra spaces in .env.local
3. Restart dev server after changes

### Issue: Yellow Banner Still Shows

**Cause**: .env.local not loaded or contains placeholders

**Solution**:
1. Check `.env.local` file exists in root directory
2. Ensure values don't contain "placeholder" or "your_"
3. Restart the dev server: `npm run dev`

### Issue: "Error connecting to database"

**Cause**: Invalid DATABASE_URL or database not accessible

**Solution**:
1. Test connection string with: `npx prisma db pull`
2. Check firewall/IP whitelist settings
3. Verify database is running

## üéì API Providers Comparison

| Provider | Free Tier | Best For | Setup Time |
|----------|-----------|----------|------------|
| **Amadeus** | ‚úÖ Unlimited test data | Flights, Hotels, Cars | 5 min |
| **Duffel** | ‚úÖ Free test mode | Flights only | 5 min |
| **Neon DB** | ‚úÖ 3GB free | PostgreSQL database | 3 min |
| **Supabase** | ‚úÖ 500MB free | PostgreSQL + Auth | 5 min |
| **Stripe** | ‚úÖ Test mode forever | Payments (optional) | 10 min |

## üìö External Resources

- **Amadeus Docs**: https://developers.amadeus.com/docs
- **Duffel Docs**: https://duffel.com/docs
- **Neon Setup**: https://neon.tech/docs/get-started-with-neon
- **Supabase Setup**: https://supabase.com/docs/guides/getting-started
- **NextAuth Setup**: https://next-auth.js.org/getting-started/introduction

## üÜò Need Help?

1. Check console for specific error messages
2. Review logs in terminal where `npm run dev` is running
3. Open GitHub Issue: https://github.com/your-org/fly2any/issues
4. Join Discord: [Your Discord Link]

## ‚úÖ Verification Checklist

After setup, verify:
- [ ] No yellow banner at top of pages
- [ ] Flight search returns real results (not demo data)
- [ ] Hotel search works without errors
- [ ] Car rental search shows vehicles
- [ ] Account page accessible (if database configured)
- [ ] No 401 errors in browser console

---

**Pro Tip**: Start with just Amadeus API for the full search experience. Add database and OAuth later when you need user accounts!
